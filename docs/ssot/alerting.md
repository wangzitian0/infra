# 告警 SSOT

> **核心问题**：告警从哪来？谁配置？怎么通知？如何分级？

## 告警来源

| 类型 | 工具/位置 | 说明 |
|------|-----------|------|
| **应用指标/链路** | SigNoz Alerts | 基于 metrics/traces 的阈值与 SLO |
| **应用日志** | SigNoz Log Alerts | 基于日志过滤/频次 |
| **集群事件** | SigNoz / K8s Events（未来） | 关键 node/pod 异常 |

## 告警分级（MVP）

| 级别 | 触发条件示例 | 行为 |
|------|--------------|------|
| **P0** | 全站不可用、关键 DB down | 立即通知（多通道） |
| **P1** | 错误率持续升高、延迟超阈 | 立即通知（单通道） |
| **P2** | 资源水位预警、慢查询 | 工作时间通知 |

## 通知通道

> **MVP**：优先使用 SigNoz 内置通知（Email / Webhook）。后续可接入自托管推送（如 `ntfy`）或聊天机器人。

| 通道 | 配置位置 | 适用级别 |
|------|----------|----------|
| Email | SigNoz UI | P0/P1 |
| Webhook（自定义） | SigNoz UI | P0/P1/P2 |

## 值班与责任

- **配置责任**：每个 L4 App 对自己的 SLO/阈值负责。
- **全局规则**：平台/数据库类告警由 Infra-Ops 维护。
- **环境**：仅 staging/prod 开启，test/ci/dev 默认关闭。

## 实施状态

| 项目 | 状态 |
|------|------|
| SigNoz Alert Rules | ⏳ 未配置 |
| 通知通道 | ⏳ 未配置 |

## 相关文件

- 可观测性选型：`docs/ssot/observability.md`
- 域名规则：`docs/ssot/network.md`
