# 2025-12-25: Reconcile Bootstrap Drift in Post-Merge CI

## Situation
Post-merge CI did not reconcile L1 drift because the Bootstrap workflow only ran on
`bootstrap/**` changes. At the same time, the secrets loader path moved, causing
post-merge failures (`tools/ci_load_secrets.py` missing). Bootstrap init also used
an implicit state key that could diverge from the `k3s/terraform.tfstate` SSOT.

## Task
1. Reconcile Bootstrap drift on every push to `main`.
2. Fix secrets loader path and state key alignment for bootstrap init.
3. Update relevant workflow/docs to reflect the new behavior.

## Action
1. **terraform-setup action**: Pointed to `tools/secrets/ci_load_secrets.py` and
   defaulted the bootstrap state key to `k3s/terraform.tfstate`.
2. **bootstrap-deploy workflow**: Removed path filter, injected the state key,
   removed redundant init, and gated apply on `terraform plan -detailed-exitcode`.
3. **Docs**: Updated workflow and bootstrap READMEs to match the new drift policy.

## Result
- Bootstrap drift is reconciled post-merge (apply only when drift exists).
- Post-merge setup no longer fails on missing loader path.
- Documentation reflects the updated L1 pipeline behavior.
- **Confidence**: 85%.

## Verification Checklist
- [ ] `bootstrap-deploy` runs on every push to `main`.
- [ ] Loader uses `tools/secrets/ci_load_secrets.py` without path errors.
- [ ] `terraform plan` exit code gates apply (only runs on exit code 2).
- [ ] Post-merge run shows bootstrap drift reconciled (apply success or no-op).
