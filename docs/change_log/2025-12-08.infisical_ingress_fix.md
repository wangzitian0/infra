# Fix Infisical Ingress Host

**Date**: 2025-12-08
**Status**: Completed

## Summary

Fixed Infisical ingress to use correct host instead of wildcard, resolving SSL certificate issues.

## Problem

The `infisical-standalone` Helm chart doesn't set `host` in ingress rules correctly:
- Ingress rule had `Host: *` instead of `i-secrets.truealpha.club`
- SSL certificate mismatch (used fake Nginx cert instead of Let's Encrypt)
- Became default backend for all unmatched domains

## Solution

- Disable Helm chart's ingress (`enabled: false`)
- Create `kubernetes_ingress_v1` resource with correct `host` field

## Files Changed

| File | Change |
|------|--------|
| `terraform/2.platform/2.secret.tf` | Disable helm ingress, add kubernetes_ingress_v1 |
| `terraform/2.platform/README.md` | Document workaround in Known Issues |

## Verification

```bash
# Before fix
curl -sv https://i-secrets.truealpha.club
# SSL certificate problem: unable to get local issuer certificate
# issuer: O=Acme Co, CN=Kubernetes Ingress Controller Fake Certificate

# After fix
curl -sv https://i-secrets.truealpha.club
# issuer: C=US; O=Let's Encrypt; CN=R12
# HTTP/2 200
```
