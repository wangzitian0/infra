# Domain Naming Convention (i-/x-)

**Date**: 2025-12-08
**Status**: Completed

## Summary

Implemented standardized domain naming convention to clearly separate internal infrastructure from external user-facing services.

## Domain Architecture

| Pattern | Cloudflare | Purpose | Example |
|---------|------------|---------|---------|
| `i-*` | Grey cloud (DNS-only) | Internal infra services | `i-atlantis`, `i-secrets`, `i-kdashboard` |
| `x-*` | Orange cloud (proxied) | Test environments | `x-staging-api`, `x-testpr-123-app` |
| Direct | Orange cloud (proxied) | Production | `api.truealpha.club`, `truealpha.club` |

### i-* (Internal)
- DNS-only, no Cloudflare proxy
- May use non-standard ports (e.g., `i-k3s:6443`)
- Admin/infrastructure services only

### x-* (External Test)
- Cloudflare proxied with CDN/DDoS protection
- `x-staging-{service}`: Stable staging environment
- `x-testpr-{num}-{service}`: PR preview (ephemeral)
- `x-testcommit-{hash}-{service}`: Commit preview (ephemeral)

### Production
- Direct domain, no prefix
- `api.truealpha.club`, `truealpha.club`
- Cloudflare proxied

## Files Changed

| File | Change |
|------|--------|
| `terraform/1.nodep/network.md` | Complete rewrite with domain patterns |
| `terraform/1.nodep/3.dns_and_cert.tf` | Keep x-staging, document patterns |
| `terraform/1.nodep/README.md` | Update DNS architecture |

## Connectivity Test Results

| Service | Domain | Status |
|---------|--------|--------|
| Atlantis | `i-atlantis.truealpha.club` | ✅ Active |
| K3s API | `i-k3s.truealpha.club:6443` | ✅ Active |
| Infisical | `i-secrets.truealpha.club` | ✅ Active |
| K8s Dashboard | `i-kdashboard.truealpha.club` | ✅ Active |
| Kubero | `i-kcloud.truealpha.club` | ⏸️ Disabled |
