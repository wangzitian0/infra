# 3.data (Data Layer / Layer 3)

**Scope**:
- **Relational**: Business PostgreSQL (Application data)
- **Cache**: Redis
- **Graph**: Neo4j
- **OLAP**: ClickHouse
- **Namespace**: `data`

## Architecture

This layer provides stateful services for **Business Applications**.

*Note: Platform DB (for Vault) is in L2 (platform).*

### Patterns

- **Passwords**: Generated by Terraform `random_password`, stored in Vault (planned), injected via K8s secrets/agent
- **Persistence**: Longhorn (or HostPath) PVCs

### Components (Planned)

| Component | Purpose | Credentials |
|-----------|---------|-------------|
| Business PostgreSQL | Application data | Vault path `/data/postgres` (planned) |
| Redis | Cache layer | Vault path `/data/redis` (planned) |
| Neo4j | Graph database | Vault path `/data/neo4j` (planned) |
| ClickHouse | Analytics/OLAP | Vault path `/data/clickhouse` (planned) |

### Usage

```bash
terraform apply -target="module.data"
```

---
*Last updated: 2025-12-09*
