# 0.check_now — Current Sprint Context

**Status**: Active
**Focus**: Atlantis Verification

## 1. Context: What are we doing?
We are verifying the Atlantis deployment by testing `atlantis plan` and `atlantis apply` commands on a test PR.

### Recent accomplishments:
1.  **Cloudflare Integration**: Added Cloudflare provider to Terraform, deployed Cert Manager, configured ClusterIssuer for DNS-01 challenge.
2.  **Network Convention**: Established `i-` (internal) and `x-` (environment) prefix patterns for domains.
3.  **Security Cleanup**: Removed all hardcoded domains/IPs from codebase and docs.
4.  **Variable Rename**: `domain_prefix` → `env_prefix` for clarity.
5.  **Cloudflare Proxy**: Enabled orange cloud for Atlantis DNS (CDN + DDoS).
6.  **Wildcard DNS**: Configured `*.truealpha.club` for Ingress-based routing.

## 2. Current Task: Wildcard DNS & Ingress
- **PR**: feat/cloudflare-integration
- **Changes**: Cloudflare provider, Cert Manager, DNS records, network docs, variable rename.
- **Blockers**: CI docs-guard (this update should fix it).

## 3. Next Steps
- [x] Add Cloudflare provider and secrets to GitHub.
- [x] Create `network.md` as SSOT for domains.
- [x] Update all READMEs in changed directories.
- [ ] Merge PR #56.
- [ ] Run `terraform apply` to provision Cloudflare resources.
- [ ] Verify Atlantis is accessible via `i-atlantis.{domain}`.

## 4. Notes / Attempts
- *Rebase Conflict*: `.github/workflows/README.md` and `.github/README.md` had conflicts. Resolved by keeping detailed CI docs in `workflows/README.md`.
- *Provider Error*: Child modules needed `versions.tf` with explicit `cloudflare/cloudflare` source.

## 5. Validation Checklist
- [ ] `Documentation Guard` workflow passes on PRs.
- [ ] `Terraform Plan (PR)` workflow passes.
- [ ] Atlantis can plan/apply after merge.
