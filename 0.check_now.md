# Check Now

Status: **Layer Architecture Simplification**
Last Updated: 2025-12-08
Change Log: [2025-12-08.layer_simplification.md](docs/change_log/2025-12-08.layer_simplification.md)

## 1. Context: What are we doing?
Simplifying infrastructure from 5-layer to 4-layer architecture.

## 2. Why?
Original 5-layer design was over-engineered:
- L2 (env_and_networking) + L3 (computing) had overlapping responsibilities
- Too many layers for single-VPS MVP

## 3. New Architecture (L1-L4)

| Layer | Name | Responsibility |
|-------|------|----------------|
| **L1** | Bootstrap | K3s, Atlantis, DNS/Cert (零依赖) |
| **L2** | Platform | Secrets (Infisical), Dashboard, Kubero, Platform DB |
| **L3** | Data | Business DBs (Postgres, Redis, Neo4j, ClickHouse) |
| **L4** | Insight | Observability (SigNoz), Analytics (PostHog), Alerting |

## 4. Changes Made

| Before | After |
|--------|-------|
| `2.env_and_networking/` | `2.platform/` |
| `3.computing/` | merged into `2.platform/` |
| `4.storage/` | `3.data/` |
| `5.insight/` | `4.insight/` |

## 5. Validation Checklist
- [x] `terraform fmt -check` passes
- [ ] `terraform validate` passes (requires init)
- [ ] `terraform plan` shows only moves, no destroy/create
- [ ] Documentation Guard CI passes
